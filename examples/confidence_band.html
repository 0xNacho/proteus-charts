<!doctype html>
<!--[if lt IE 7]>      <html class='no-js lt-ie9 lt-ie8 lt-ie7' lang=''> <![endif]-->
<!--[if IE 7]>         <html class='no-js lt-ie9 lt-ie8' lang=''> <![endif]-->
<!--[if IE 8]>         <html class='no-js lt-ie9' lang=''> <![endif]-->
<!--[if gt IE 8]><!-->
<html class='no-js' lang=''>
<!--<![endif]-->

<head>
	<title>Simple ConfidenceBand on LineChart</title>
	<script src='../node_modules/d3/build/d3.min.js'></script>
	<script src='../dist/proteic.js'></script>
	<link rel="stylesheet" href="../dist/proteic.css">
</head>

<body>
	<div id='chart'></div>
	<div id='chart-temporal'></div>

	<script>
        var dataArea = [
            {key:'serie1', x:1, y:5, error:1},
            {key:'serie1', x:2, y:15, error:1},
            {key:'serie1', x:3, y:35, error:1},
            {key:'serie1', x:4, y:25, error:1},
            {key:'serie1', x:5, y:12, error:1},
            {key:'serie1', x:6, y:0, error:1},
            {key:'serie1', x:7, y:21, error:1},
            {key:'serie1', x:8, y:0, error:1},
            {key:'serie2', x:1, y:-1, error:1},
            {key:'serie2', x:2, y:4, error:1},
            {key:'serie2', x:3, y:20, error:1},
            {key:'serie2', x:7, y:12, error:1},
            {key:'serie2', x:5, y:14, error:1},
            {key:'serie2', x:6, y:9, error:1},
            {key:'serie2', x:4, y:12, error:1},
            {key:'serie2', x:8, y:13, error:1}
    ];
    confidenceLinechart = new proteic.Linechart(dataArea, {
		confidenceBandOpacity: 0.3, // default is 0.5
    	selector: '#chart',
        markerSize:10,
        markerShape: 'dot',
        width: '90%',
        height: 400,
        onClick: (d) => console.log('clicking', d),
        onUp: (d) => console.log('upping', d),
        onHover: (d) => console.log('hovering', d),
        onDown: (d) => console.log('downing', d),
        onLeave: (d) => console.log('leaving', d),
    }).annotations([
        { type: 'threshold', axis: 'y', value: 15.2, text: 'Everything is fine below this line' },
        { type: 'threshold', axis: 'y', value: 6.8, text: 'We\'re on trouble over this line' },
        { type: 'threshold', axis: 'x', value: 3.1, text: 'Something could happen at this point' }
    ])
	.statistics([
		{type: 'confidenceBand', variable: 'serie2', confidence: 'error',
		 modifier: (confidence) => 2 * confidence},
		{type: 'confidenceBand', variable: 'serie1', confidence: 'error'},
	]);
    confidenceLinechart.draw();

	var temporalData = [
        {key:'serie1', x: '01/01/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/02/16', y: 5, error: 0.5},
        {key:'serie1', x: '01/03/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/04/16', y: 8, error: 0.5},
        {key:'serie1', x: '01/04/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/05/16', y: 5, error: 0.5},
        {key:'serie1', x: '01/06/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/07/16', y: 8, error: 0.5},
        {key:'serie1', x: '01/08/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/09/16', y: 5, error: 0.5},
        {key:'serie1', x: '01/10/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/11/16', y: 8, error: 0.5},
        {key:'serie1', x: '01/12/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/13/16', y: 5, error: 0.5},
        {key:'serie1', x: '01/14/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/15/16', y: 8, error: 0.5},
        {key:'serie1', x: '01/19/16', y: 5, error: 0.5}, //unsorted!!!!
        {key:'serie1', x: '01/16/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/17/16', y: 8, error: 0.5},
        {key:'serie1', x: '01/18/16', y: 3, error: 0.5},
        {key:'serie1', x: '01/20/16', y: 3, error: 0.5}
    ];
    temporalLinechart = new proteic.Linechart(temporalData, {
		confidenceBandOpacity: 0.4,
		areaOpacity: 0.2,
    	xAxisType: 'time',
        xAxisFormat: '%m/%d/%y',
        selector: '#chart-temporal',
        width: '90%',
        markerSize: 0, // No markers,
        xAxisLabel: 'Numbers',
        yAxisLabel: 'Y Axis',
    })
	.statistics([
		{type: 'confidenceBand', variable: 'serie1', confidence: 'error',
		 modifier: (confidence) => 2 * confidence}
	]);
    temporalLinechart.draw();

    </script>
  </body>

  </html>
